<ui:composition template="./../modelos/default.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="title">
        Folha de Pagemento
    </ui:define>

    <ui:define name="header">
        <script type="text/javascript">
            $(function () {

                $(document).ready(function () {
                    $('#folha').addClass('hide');

                    $('.salvEV').click(function () {
                        $('#padrao').hide();
                        $('#folha').removeClass('hide');

                    });

                });


            });
        </script>
    </ui:define>

    <ui:define name="breadcrumb">
        <li><h:link value="Folha de Pagamento" outcome="/faces/view/fp/folhapaglst" /></li>
        <li><h:link value="Recibo de Pagamento" outcome="/faces/view/fp/folhapagfrm" /></li>
    </ui:define>

    <ui:define name="main-content">
        <style>
            .bloco {
                margin: 0px 10px 0px;
                padding: 25px 25px 10px 0px;           
                background: #f8f8f8;
                border: 1px solid #ddd;
                border-radius: .25em;
                overflow: auto;
            }
            .bloco2 {
                margin: 0px 10px 0px;
                padding: 0px 0px 0px 0px;           
                background: #f8f8f8;
                border: 1px solid #ddd;
                border-radius: .25em;
                overflow: auto;
            }
            .table{
                margin-bottom: 1px;
            }

            .detalhes{
                float: right;
                padding: 15px 14px 0px;

            }
        </style>
        <div class="panel panel-body">
            <h3><h:outputText value="Folha de Pagamento"/></h3>
            <f:view>
                <h:form styleClass="form-horizontal">

                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h2 class="panel-title tex-primary">Dados da Empresa</h2>
                        </div>

                        <div class="panel-body">

                            <div class="form-group">
                                <!--                                <h:outputLabel value="Empresa:" for="emp" styleClass="control-label col-md-2" />
                                
                                                                <div class="col-md-4 col-xs-3 autocomplete">
                                                                    <h:inputText pt:autofocus=""  id="idEmpresa" value="" title="Nome da Empresa" styleClass="form-control" readonly="true" />
                                                                </div>-->

                                <h:outputLabel value="Empresa:" for="emp" styleClass="control-label col-md-2" />
                                <div class="col-md-4 col-xs-3 autocomplete">
                                    <h:inputText readonly="true" pt:autofocus=""  id="idEmpresa" value="" title="Nome da Empresa" styleClass="form-control" />
                                </div>




                                <h:outputLabel value="CNPJ:" for="idcnpj" styleClass="control-label col-md-2" />
                                <div class=" col-xs-4" >
                                    <h:outputLabel value="89.008.435/0030-67" for="idcnpj" styleClass="control-label" />
                                </div>
                            </div>
                            <div class="form-group">
                                <h:outputLabel value="Endereço:" for="idEndereco" styleClass="control-label col-md-2" />
                                <div class=" col-xs-6" >
                                    <h:outputLabel value="AV Santo Augosto" for="idendereco" styleClass="control-label" />
                                </div>
                            </div>
                        </div>
                    </div>




                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h2 class="panel-title tex-primary">Dados do Colaborador</h2>
                        </div>
                        <div class="panel-body">

                            <div class="form-group">

                                <h:outputLabel value="Colaborador:" for="idColaborador" styleClass="control-label col-md-2" />
                                <div class="col-md-4 col-xs-3 autocomplete">
                                    <h:inputText readonly="true" pt:autofocus=""  id="idNome" value="#{funcionarioBean.pessoa.pes_nome}" title="Nome do colaborador" styleClass="form-control" />
                                </div>
                                <h:outputLabel value="CPF:" for="idCPF" styleClass="control-label col-md-2" />
                                <div class=" col-xs-3" >
                                    <h:outputLabel value="${funcionarioBean.pessoa.pes_cpf}" for="idcpf" styleClass="control-label"  />
                                </div>
                            </div>

                            <div class="form-group">
                                <h:outputLabel value="Cargo:" for="idCargo" styleClass="control-label col-md-2" />
                                <div class=" col-xs-6" >
                                    <h:outputLabel value="${funcionarioBean.cargosPessoa.cargo.car_descricao}" for="idcargo" styleClass="control-label" />
                                </div>

                                <div class="btns-top-table col-xs-3">

                                    <!--                                    <h:link outcome="eventopadlst" value="Gerenciar Eventos Padrão" styleClass="btn btn-success">
                                                                            <f:param name="codigoFolha" value="${funcionarioBean.pessoa.pes_codigo}"/>
                                                                            <i class="fa fa-plus"></i> 
                                                                        </h:link>-->
                                    <h:commandLink styleClass="btn btn-success" action="#{funcionarioBean.gerarFolha()}">
                                        <i class="fa fa-plus"></i> Gerenciar Eventos Padrão
                                    </h:commandLink>

                                </div>

                            </div>
                            <div class="form-group">
                                <h:outputLabel value="Data de Adimição:" for="idiAdimicao" styleClass="control-label col-md-2" />
                                <div class=" col-xs-6" >
                                    <h:outputLabel pt:type="date" value="${funcionarioBean.pessoa.pes_datacadastro}" for="idAdmicao" styleClass="control-label" >
                                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                                    </h:outputLabel>
                                </div>

                            </div>
                            <hr style="border-top: 1px solid #D7D3F5"></hr>
                            <div id="padrao">
                                <h:dataTable var="fl" value="${funcionarioBean.eventosPadroes}" styleClass=" table table-bordered table-striped">
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Código"/>
                                        </f:facet>
                                        <h:outputText value="${fl.evp_codigo}" /> 
                                    </h:column>

                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Descrição"/>
                                        </f:facet>
                                        <h:outputText value="${fl.eve_codigo.eve_descricao}" /> 
                                    </h:column>


                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Série Evento"/>
                                        </f:facet>
                                        <h:outputText value="${fl.eve_codigo.serieevento.sev_nome }" />
                                    </h:column>

                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Tipo"/>
                                        </f:facet>
                                        <h:outputText value="${fl.eve_codigo.tipoevento.tpe_nome}" />
                                    </p:column>
                                    <h:column headerClass="col-excluir-header">
                                        <f:facet name="header">
                                            <h:outputText value="Excluir"/>
                                        </f:facet>
                                        <h:commandLink onclick="return confirm('Deseja realmente excluir o Evento Padrão?');" action="${funcionarioBean.deleteEventoPadraoFolha(fl)}">
                                            <i class="fa fa-trash"></i> Excluir
                                        </h:commandLink>
                                    </h:column>
                                </h:dataTable>
                                <div style="margin: 5px">
                                    <div class="from-group">
                                        <div class="col-md-offset-10 col-md-11 col-sm-offset-0 col-sm-12 btn-group-separated">

                                            <p:commandButton styleClass="salvEV btn btn-primary" value="OK" action="#{folhaPagamentoBean.salvaEventPadrao(funcionarioBean.pessoa.pes_codigo)}"  >
<!--                                                <f:param name="idPes" value="{funcionarioBean.pessoa.pes_codigo}"></f:param>                                          -->
                                            </p:commandButton>  


                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="folha" >
                                <div>
                                    <h:dataTable var="itens" value="${folhaPagamentoBean.dataModelEveFolhas}" styleClass=" table table-bordered table-striped">
                                        <h:column>
                                            <f:facet name="header">
                                                <h:outputText value="Código"/>
                                            </f:facet>
                                            <h:outputText value="${itens.eve_evento.eve_codigo}" /> 
                                        </h:column>

                                        <h:column>
                                            <f:facet name="header">
                                                <h:outputText value="Descrição"/>
                                            </f:facet>
                                            <h:outputText value="${itens.evf_descricao}" /> 
                                        </h:column>


                                        <h:column>
                                            <f:facet name="header">
                                                <h:outputText value="Indice"/>
                                            </f:facet>
                                            <h:outputText value="${itens.evf_indice }" />
                                        </h:column>

                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Valor"/>
                                            </f:facet>
                                            <h:outputText value="${itens.evf_valor}" />
                                        </p:column>
                                    </h:dataTable>
                                </div>

                                <div class="form-group" >

                                    <div class="btns-top-table col-xs-4" style="padding: 37px 0px 5px 90px;">

                                        <h:link outcome="eventopadfrm" value="Adicionar evendos na Folha" styleClass="btn btn-success">
                                            <f:param name="idPessoa" value="${funcionarioBean.pessoa.pes_codigo}"/>
                                            <f:param name="idEvento" value="2"/>
                                            <i class="fa fa-plus"></i> 
                                        </h:link>


                                    </div>
                                    <div class="detalhes col-xs-8 ">

                                        <h:dataTable var="it" value="${folhaPagamentoBean.histFolhas}" styleClass=" table table-bordered table-striped">
                                            <h:column>
                                                <f:facet name="header">
                                                    <h:outputText value="Total de Acréscimos"/>
                                                </f:facet>

                                                <h:outputText value="${it.hif_valor_acre}" /> <br />

                                            </h:column>

                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="Total de Descontos"/>
                                                </f:facet>
                                                <h:outputText value="${it.hif_valor_desc}" /> <br />

                                            </p:column>
                                            <p:column>
                                                <f:facet name="header">
                                                    <h:outputText value="Valor Liquido"/>
                                                </f:facet>
                                                <h:outputText value="${it.hif_valor_liquido}" /> <br />

                                            </p:column>
                                        </h:dataTable>

                                    </div>
                                </div>
                                <h:dataTable var="car" value="" styleClass=" table table-bordered table-striped">
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Salário Base"/>
                                        </f:facet>
                                        <h:outputText value="900 R$" /> <br />

                                    </h:column>

                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Salário Contr.INSS"/>
                                        </f:facet>
                                        <h:outputText value="Salário Base" /> <br />

                                    </h:column>


                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Base Cálc. FGTS"/>
                                        </f:facet>
                                        <h:outputText value="1.500,00 R$" /> <br />

                                    </h:column>

                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="FGTS Mês"/>
                                        </f:facet>
                                        <h:outputText value="0,00 R$" /> <br />                                  
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Base Cálc. IRRF"/>
                                        </f:facet>
                                        <h:outputText value="0,00 R$" /> <br />                                  
                                    </p:column>
                                    <p:column>
                                        <f:facet name="header">
                                            <h:outputText value="Faixa IRRF"/>
                                        </f:facet>
                                        <h:outputText value="0,00 R$" /> <br />                                  
                                    </p:column>
                                </h:dataTable>


                                <div class="form-group">
                                    <div class="col-md-offset-9 col-md-11 col-xs-offset-10 col-sm-12 btn-group-separated">
                                        <h:link styleClass="btn btn-default" value="Cancelar" />
                                        <h:commandButton styleClass="btn btn-primary"   value="Gerar" ></h:commandButton>
                                    </div>
                                </div>
                            </div>


                        </div>


                    </div>

                </h:form>
            </f:view>
        </div>
    </ui:define>

</ui:composition>