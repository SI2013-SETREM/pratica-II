<ui:composition template="../modelos/default.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

    <ui:define name="header">
        <script type="text/javascript">
            $(function() {
                $('.pergunta-link').click(function(){
                    $(this).hide();
                    var $form = $('.pergunta-form[data-pergunta=' + $(this).data('pergunta') + ']');
                    $form.show();
                    $('.prgPergunta', $form).focus();
                    return false;
                });
            });
        </script>
    </ui:define>

    <ui:define name="title">
        Questionários
    </ui:define>

    <ui:define name="breadcrumb">
        <li>Recrutamento e Seleção</li>
        <li><h:link value="${questionarioBean.pTitle}" outcome="/faces/view/rs/questionariolst" /></li>
    </ui:define>

    <ui:define name="main-content">
        <div class="panel panel-body" style="overflow: hidden;">
            <h3><h:outputText value="${questionarioBean.sTitle}"/></h3>
            <f:view>
                <h:form styleClass="form-horizontal">
                    <h:inputHidden id="qstCodigo" value="#{questionarioBean.questionario.qstCodigo}" />
                    <div class="form-group">
                        <h:outputLabel value="Título:" for="qstTitulo" styleClass="control-label col-sm-1 col-md-2" />
                        <div class="col-md-5 col-sm-12">
                            <h:inputText pt:required="required" id="qstTitulo" value="#{questionarioBean.questionario.qstTitulo}" title="QstTitulo" styleClass="form-control" />
                        </div>
                        
                        <h:outputLabel value="Pontuação máxima (por questão):" for="qstPontuacaomax" styleClass="control-label col-sm-1 col-md-3" />
                        <div class="col-md-2 col-sm-12">
                            <p class="form-control-static">#{questionarioBean.questionario.qstPontuacaomax}</p>
                        </div>
                    <div class="form-group">
                    </div>
                        <h:outputLabel value="Tipo do Questionário:" for="qstTipo" styleClass="control-label col-sm-1 col-md-2" />
                        <div class="col-md-3 col-sm-12">
                            <h:selectOneMenu pt:required="required" id="qstTipo" styleClass="form-control" value="#{questionarioBean.questionario.qstTipo}">
                                <f:selectItem itemValue="1" itemLabel="Normal" />
                                <f:selectItem itemValue="2" itemLabel="Avaliação 180º" />
                                <f:selectItem itemValue="3" itemLabel="Avaliação 360º" />
                            </h:selectOneMenu>
                        </div>
                    </div>
                    <h4><h:outputText value="${perguntaBean.pTitle}"/></h4>
                    <div class="col-xs-12">
                        <div class="perguntas form-group list-group">
                            <c:forEach items="#{questionarioBean.questionario.perguntas}" var="pergunta">
                                <a class="pergunta-link list-group-item" href="#" data-pergunta="#{pergunta.prgCodigo}">
                                    <span class="form-control-static">#{pergunta.prgPergunta}</span>
                                </a>
                                <div class="pergunta-form list-group-item" style="display:none;" data-pergunta="#{pergunta.prgCodigo}">
                                    <h:inputText pt:placeholder="Pergunta" id="prgPergunta" value="#{pergunta.prgPergunta}" title="Pergunta" styleClass="form-control prgPergunta"/>
                                </div>
                            </c:forEach>
                            <a class="list-group-item list-group-item-success text-center" href="#" onclick="$('.cliqueme').click(); return false;">
                                <i class="fa fa-plus"></i> Adicionar pergunta
                            </a>
                            <h:commandButton styleClass="hidden cliqueme" action="#{questionarioBean.addPergunta()}"></h:commandButton>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-offset-1 col-md-11 col-sm-offset-0 col-sm-12 btn-group-separated">
                            <h:link styleClass="btn btn-default" value="Cancelar" outcome="#{questionarioBean.listar()}" />
                            <h:commandButton styleClass="btn btn-primary" value="Salvar" action="#{questionarioBean.salvar()}"></h:commandButton>
                        </div>
                    </div>
                </h:form>
            </f:view>
        </div>
    </ui:define>

</ui:composition>