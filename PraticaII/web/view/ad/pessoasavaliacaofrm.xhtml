<ui:composition template="./../modelos/default.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

    <ui:define name="title">
        #{perguntaPessoaAvaliacaoBean.getpTitle()}
    </ui:define>

    <ui:define name="breadcrumb">
        <li>${perguntaPessoaAvaliacaoBean.getsTitle()}</li>
    </ui:define>

    <ui:define name="main-content">
        <script>
            $(function () {
                $('.FieldRemove').remove();
            });
        </script>
        <style>
            textarea{
                width: 100% !important;
            }
            .lbl{
                text-align: right;
            }
            .field{
                text-align: left;               
            }
        </style>
        <div class="panel panel-body">
            <f:view>
                <div class="row">
                    <div class="col-md-12">
                        <label style="font-size: 20px;">Dados da Pessoa:</label>
                        <div class="row">
                            <div class="col-md-6 col-xs-12">
                                <div class="form-group">
                                    <h:outputLabel value="Nome:" for="nome" styleClass="lbl col-md-4"/>
                                    <div class="col-md-8 col-xs-12">
                                        <h:outputText id="nome" value="#{perguntaPessoaAvaliacaoBean.avaliado.pes_nome}" styleClass="field"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <h:form styleClass="form-horizontal" id="frmQuestionario">
                    <label style="font-size: 20px;">Questionário: </label>
                    <h:panelGroup id="forEachPerguntas">
                        <div class="col-md-12" style="margin-bottom: 15px;" id="forEachPerguntas">
                            <!--<h:dataTable value="{perguntaPessoaAvaliacaoBean.lsPerguntasPessoa}"></h:dataTable>-->
                            <ui:repeat value="#{perguntaPessoaAvaliacaoBean.lsPerguntasPessoa}" var="item" varStatus="index">
                                <!--<ui:repeat value="{perguntaPessoaAvaliacaoBean.lsPerguntasPessoa}" var="item">-->
                                <div class="form-group list-group-item" >
                                    <div class="row">
                                        <div class="col-md-7">
                                            <h:inputHidden value="${item.avaliacao.ava_codigo}"/>
                                            <h:inputHidden value="${item.avaliacao}"/>
                                            <h:inputHidden value="${item.avaliador.pes_codigo}"/>
                                            <h:inputHidden value="${item.colaboradorAvaliado.pes_codigo}"/>
                                            <h:inputHidden value="${item.getPergunta().getPrgCodigo()}"/>

                                            <h:outputLabel value="${item.getPergunta().getPrgPergunta()}" styleClass="col-md-12"/>
                                            <h:inputTextarea rendered="true" pt:required="${item.getPergunta().isPrgObrigatoria()}" value="#{item.ppa_resposta}" styleClass="form-control ${item.getPergunta().getPrgTipo() != 1 ? 'FieldRemove' : ''}"/>
                                            <h:selectOneMenu pt:required="${item.getPergunta().isPrgObrigatoria()}"  value="#{item.ppa_resposta}" styleClass="form-control ${item.getPergunta().getPrgTipo() != 2 ? 'FieldRemove' : ''}">
                                                <f:selectItems value="#{item.getPergunta().getPerguntaOpcoes()}" var="opcao" itemLabel="#{opcao.getOpcNome()}" itemValue="#{opcao.getOpcPontuacao()}" pt:autofocus=""/>
                                            </h:selectOneMenu>
                                        </div>
                                        <div class="col-md-4 ${item.getPergunta().getPrgTipo() != 1 ? 'FieldRemove' : ''}">
                                            <h:outputLabel value="Nota entre 0 e 10:" styleClass="col-md-8 lbl"/>
                                            <h:inputText pt:required="true" pt:type="number" pt:max="10" pt:min="0" style="width: 50px" value="#{item.ppa_pontuacao}"/>
                                        </div>

                                    </div>
                                </div>
                            </ui:repeat>
                            <div class="col-md-2">

                            </div>
                        </div>
                    </h:panelGroup>
                    <div class="form-group">
                        <div class="col-md-offset-1 col-md-11 col-sm-offset-0 col-sm-12 btn-group-separated">
                            <h:link styleClass="btn btn-default" value="Cancelar" outcome="${perguntaPessoaAvaliacaoBean.listar()}" />
                            <h:commandButton styleClass="btn btn-primary" value="Salvar e Avançar" action="${perguntaPessoaAvaliacaoBean.salvar()}"></h:commandButton>
                        </div>
                    </div>
                </h:form>
            </f:view>
        </div>
    </ui:define>
</ui:composition>